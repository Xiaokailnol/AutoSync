name: ğŸ¤– åŒæ­¥æ›´æ–°

on:
  workflow_dispatch:
    inputs:
      target:
        description: 'é€‰æ‹©è¦åŒæ­¥çš„ OpenWrt ä¸Šæ¸¸ç»„ä»¶'
        required: true
        default: 'OpenWrt æ’ä»¶'
        type: choice
        options:
          - 'Docker ç›¸å…³ç»„ä»¶'
          - 'OpenWrt æ’ä»¶'
          - 'Golang ç¼–è¯‘å·¥å…·'
          - 'Realtek ç½‘å¡é©±åŠ¨'
          - 'æ— çº¿å†…æ ¸é©±åŠ¨'        # mt76 + mac80211
          - 'Rockchip å¹³å°æºç '     # target_linux_rockchip-6.x
          - 'é€šç”¨å¹³å°æºç '         # target_linux_generic

jobs:
  build:
    name: ğŸŸ¢ åŒæ­¥æ¨¡å— â†’ ${{ github.event.inputs.target }}
    if: github.event.repository.owner.id == github.event.sender.id || ! github.event.sender.id
    runs-on: ubuntu-24.04
    defaults:
      run:
        shell: bash

    steps:
    - name: Checkout
      uses: actions/checkout@main
      with:
        fetch-depth: 0

    - name: ğŸš€ Runner ç¯å¢ƒå‡†å¤‡ä¸ Git é…ç½®
      run : |
        sudo timedatectl set-timezone 'Asia/Shanghai'
        git config --global user.email "2519840456@qq.com"
        git config --global user.name "Xiaokailnol"

